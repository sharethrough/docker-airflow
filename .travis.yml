sudo: required
language: minimal
services:
- docker
env:
  global:
  - secure: miQJfxy271naA+vhODOfQ7l0bqmdL1YdYR5/AWIXaW3oSNuzET+KQLYlyYo0CylXbLAsQ/3A1JqMrQO0kBsnVCsf0ccBPc6t67qdJHgIVk+g4tOhZJlAYUpn+DcW3ECNO019xsM9yLytWlaWo6o1ACMTgDLlFN5tvtJmS7AuTUs/KSqN8AfhKsCDNE8i7i/+kFvDiyX/755Zr5TALOJETL17ZJzjIloLczCcZRg5BXS7YLba8Th0GayPIYaFucQSTf25Aj15rJzVS1/tsZ3da5cP7jWTCUIFQOKL2qPmeD5qpuid+eqFxxyi6IUXv0CidNZHSppwNgg3Vx7g5FE+lCEfLm30DNIPXildDBAuL0R/3jqWEA31BGcSuZGz0F4t0QojZeSloMhFvs+QTxwidq6OAW7XQip1SpRhR+z2KEZsSvxbUibTJQcqZTCjf+yX/svOeTa42D7bI76niO0UvyGFc1GqH8O0ryMXonr0nfKETgnf+6CpEjAC900d7wHR7xczMLOG84BtVv8NEqkLrZOxZUFkXH2IjWRg7PDLDKRjk8Jkut7Px1qZSxXCpsnQPAKXj8RhNc4D3yicLzy/5jPtunrV4vx4nkHhXWiiaazcCPIeEMvtwcZoMMEVXPH/AdqZuNJ1YrIjQhvdivJE4pIC3QQYeAm1s+jP2POmswE=
  - secure: qy17OKU3V3jIqVyMQHE6/JSJdn+CtJG4z433XRHm7mqhaJHHtrApytLWWGg4/XPXMYMqX3HVl6bqVyMSK1nEsejjAl2zd4oISFXDaZuv5DoNOPYNgmjh6o+PxbDQ8Mg59Obe5H9FtRWlTLU48l2HH3ck2Thsl/5mA5hdyLoAp5F0kK9X4m86fRX+EhqMJARSWaiLECV3JWUEXIRiLPQnmvKzrvpPoOZvZUX5TAk0Wplggrlkb7l9Pe8mu9H8Cj6f2ZoYbisG1sJlsQTCtDF8vzX2GKy8nEJ92lkJ0tDh4ENM9RKwIsJQp1JB75lYleHy67jP4Snyped5f3CdEszkDcRtzk2oZGNDBbXKjvVmhOoPQjrO4aSMD93AWpl84EK+QPQwhbYqxn/7cMJJUrihQbNd+CJ8mEVCihglRu9T0WM+hOwtRKSEAz/U3tmOx+tB+QuBUcjLtBfHoCzyNEbMFXhTFrQlp9wDXG06/tUY9G8lNqCnqmXh68qaNiBwCw7AL+Z2rtAJ7cPXztyeWMzXkkKdaT18ZT1Y0Kxi+ACXT57eebRLsgX16TiYo2zhYpkQk696QnkK5xJCyOW15hpmQWWCpTTajbEVoPfBPjnI9G6xtONy5Y0no7HWFYAvZkDhAGYhmvuaejh0V1mlihD+fxSsZ5QzU8Iv+0do+lELIks=
  - secure: m3lBYH/qh6mvAZtpQKVPePfQPhwIwJXvVGr7+MRYQe0ldtzbVYg8mUUWfXSVvv8hKDeCV5bmiBfQT+k+p0fuhn674btIihcDQCyGmKoFOj8CgwDUiW0uVLeoWTEBqfrPFas0qLGNSaY4z72NZA8FdlKz5cUacNEtnwzjTwQZOZ05Sy01IPpJ1wl5HxRLRJYSE3A7nlDyxxNw61l7bTARcTTKYYerA7/U5gEf/m9gZf2xsomyYTSvCmLl8fuYU0eckN683uKLYIhJXMVkUt1HeBAj5s2OMS0CM2/ZQLqnCqEHuV+Fk+DNdHIQUKiHfBqFSb7jgwG2zw/rOsd6Z/bxpNQxeEdFhGe5gim47vxn6XMzH5Gmw0q1MqLBqQf1dvkxDvfOBPbBSFyicqRib5kwmSN/cXOKcbWSHXp1tUq3xnFBZD38q8cvUwmsV8fUpuCtN0CL8UTPSVxdeRAWgPZYzMz2nvRRwjPZEC5HlFQ2rippZFNRLIu1W42iuUBxMYF3vyYzSMiQf2xaU/YLqNxvJqLsnk2NULqrgeqgjaMaNtMGP7i7+rJMp8oC84lM7wtnqw0tRGR+tF4+7W+w4p3tgM7KUsLsv9xhlMnXElyfSnlPkn1xdn5Dm4dIqCi6kC7AUz7smxGj16An2vuMYbav30UolSXWpn9zMBxRZbrNTOo=
before_install:
- pip install --user awscli
- export PATH=$PATH:$HOME/.local/bin
script:
- docker build -t 119933218031.dkr.ecr.us-east-1.amazonaws.com/airflow-base .
deploy:
  provider: script
  script: bash bin/ecr_push.sh
  on:
    branch: master
